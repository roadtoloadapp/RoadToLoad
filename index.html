<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>RoadToLoad ‚Äì T√©rk√©p</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.counter.dev/script.js" data-id="76b74c5e-2f75-462f-b591-08d048624b98" data-utcoffset="1"></script>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />


</head>

<body>
  <header>
    <h1>RoadToLoad</h1>

    <div class="hamburger" id="hamburger">
      <div></div><div></div><div></div>
    </div>

    <nav id="nav-menu">
      <a id="about-link">R√≥lunk</a>
      <a id="contact-link">Kapcsolat</a>
      <select id="language-select">
        <option value="hu">HU</option>
        <option value="en">EN</option>
      </select>
      <button id="generate" class="generate-btn">üé≤ T√∫ra gener√°l√°sa</button>
    </nav>
  </header>

  <div id="map"></div>
  <div id="bar-list"></div>

  <button id="mobile-generate" class="mobile-generate">üé≤ T√∫ra gener√°l√°sa</button>

  <footer>¬© RoadToLoad 2025</footer>

  <div id="about-overlay" class="overlay">
    <button class="close-btn" id="close-about">√ó</button>
    <p id="about-text">
      <b>A RoadToLoad</b> Budapest legizgalmasabb helyeit k√∂ti √∂ssze egyetlen √©lm√©nny√©.<br><br>
      Nem √∫tvonalat adunk, hanem t√∂rt√©neteket, amiket te √≠rsz meg ‚Äî egy kocsm√°t√≥l a m√°sikig.<br><br>
      T√∂ltsd √∫jra a v√°rost, fedezd fel a rejtett arc√°t, √©s indulj el a saj√°t utadon.
    </p>
  </div>

  <div id="contact-overlay" class="overlay">
    <button class="close-btn" id="close-contact">√ó</button>
    <form id="contact-form">
      <h2 id="contact-title">Kapcsolatfelv√©tel</h2>
      <h3 id="contact-email">hello@roadtoload.hu</h3>
      <input type="text" name="name" id="name" placeholder="N√©v" required>
      <input type="email" name="email" id="email" placeholder="E-mail c√≠m" required>
      <textarea name="message" id="message" placeholder="√úzenet..." required></textarea>
      <button type="submit" class="submit-btn" id="send-btn">K√ºld√©s</button>
    </form>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // T√©rk√©p
    const map = L.map('map').setView([47.4979, 19.0402], 13);
    L.tileLayer('https://basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', { maxZoom: 19 }).addTo(map);

    const bars = [
      { name: "Mazel Tov", street: "Ak√°cfa utca 47.", coords: [47.497, 19.060] },
      { name: "Szimpla Kert", street: "Kazinczy utca 14.", coords: [47.49700901903984, 19.06332904316594] },
      { name: "Instant-Fogas", street: "Ak√°cfa utca 49‚Äì51.", coords: [47.4984, 19.0610] },
      { name: "Kis√ºzem", street: "Kis Di√≥fa utca 2.", coords: [47.4980, 19.0633] },
      { name: "Dzzs B√°r", street: "Doh√°ny utca 20.", coords: [47.4995, 19.0595] },
      { name: "Ell√°t√≥ Kert", street: "Kazinczy utca 48.", coords: [47.4992, 19.0641] }
    ];

    const barListDiv = document.getElementById('bar-list');
    function generateTour() {
      map.eachLayer(layer => { if (layer instanceof L.Marker || layer instanceof L.Polyline) map.removeLayer(layer); });
      const shuffled = bars.sort(() => 0.5 - Math.random()).slice(0, 4);
      let previous = null;
      let listHTML = `<h3>${currentLang === 'hu' ? 'Mai t√∫r√°d:' : 'Your tour:'}</h3>`;
      shuffled.forEach((bar, i) => {
        L.marker(bar.coords).addTo(map).bindPopup(`<b>${bar.name}</b><br>${bar.street}`);
        listHTML += `<b>${i + 1}. ${bar.name}</b><br><span style="font-size:0.85rem;">${bar.street}</span><br><br>`;
        if (previous) L.polyline([previous.coords, bar.coords], { color: '#fdd835', weight: 5 }).addTo(map);
        previous = bar;
      });
      barListDiv.innerHTML = listHTML;
      barListDiv.style.display = "block";
    }
    document.getElementById('generate').addEventListener('click', generateTour);
    document.getElementById('mobile-generate').addEventListener('click', generateTour);

    // Men√º √©s overlay
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('nav-menu');
    const aboutOverlay = document.getElementById('about-overlay');
    const contactOverlay = document.getElementById('contact-overlay');

    hamburger.addEventListener('click', () => navMenu.classList.toggle('show'));
    document.getElementById('about-link').addEventListener('click', () => aboutOverlay.style.display = 'flex');
    document.getElementById('contact-link').addEventListener('click', () => contactOverlay.style.display = 'flex');
    document.getElementById('close-about').addEventListener('click', () => aboutOverlay.style.display = 'none');
    document.getElementById('close-contact').addEventListener('click', () => contactOverlay.style.display = 'none');

    // Nyelvv√°lt√≥
    let currentLang = 'hu';
    const langSelect = document.getElementById('language-select');
    const texts = {
      hu: {
        about: "R√≥lunk", contact: "Kapcsolat", generate: "üé≤ T√∫ra gener√°l√°sa",
        aboutText: "<b>A RoadToLoad</b> Budapest legizgalmasabb helyeit k√∂ti √∂ssze egyetlen √©lm√©nny√©.<br><br>Nem √∫tvonalat adunk, hanem t√∂rt√©neteket, amiket te √≠rsz meg ‚Äî egy kocsm√°t√≥l a m√°sikig.<br><br>T√∂ltsd √∫jra a v√°rost, fedezd fel a rejtett arc√°t, √©s indulj el a saj√°t utadon.",
        contactTitle: "Kapcsolatfelv√©tel", name: "N√©v", email: "E-mail c√≠m", msg: "√úzenet...", send: "K√ºld√©s"
      },
      en: {
        about: "About", contact: "Contact", generate: "üé≤ Generate tour",
        aboutText: "<b>RoadToLoad</b> connects Budapest's most exciting places into one adventure.<br><br>We don‚Äôt just give you a route ‚Äî we give you stories you‚Äôll create, from one bar to the next.<br><br>Reload the city, discover its hidden face, and start your own journey.",
        contactTitle: "Contact us", name: "Name", email: "E-mail address", msg: "Message...", send: "Send"
      }
    };
    langSelect.addEventListener('change', (e) => {
      currentLang = e.target.value;
      const t = texts[currentLang];
      document.getElementById('about-link').textContent = t.about;
      document.getElementById('contact-link').textContent = t.contact;
      document.getElementById('generate').textContent = t.generate;
      document.getElementById('mobile-generate').textContent = t.generate;
      document.getElementById('about-text').innerHTML = t.aboutText;
      document.getElementById('contact-title').textContent = t.contactTitle;
      document.getElementById('name').placeholder = t.name;
      document.getElementById('email').placeholder = t.email;
      document.getElementById('message').placeholder = t.msg;
      document.getElementById('send-btn').textContent = t.send;
    });

    // Web3Forms k√ºld√©s
    const form = document.getElementById('contact-form');
    const submitBtn = document.getElementById('send-btn');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      formData.append("access_key", "fefe9987-1d25-45f4-8f72-8d82ef6f152d");

      const originalText = submitBtn.textContent;
      submitBtn.textContent = currentLang === 'hu' ? "K√ºld√©s folyamatban..." : "Sending...";
      submitBtn.disabled = true;

      try {
        const response = await fetch("https://api.web3forms.com/submit", {
          method: "POST",
          body: formData
        });
        const data = await response.json();

        if (response.ok) {
          alert(currentLang === 'hu' ? "Siker! Az √ºzenetet elk√ºldt√ºk." : "Success! Your message has been sent.");
          form.reset();
          contactOverlay.style.display = 'none';
        } else {
          alert("Error: " + data.message);
        }
      } catch (error) {
        alert(currentLang === 'hu' ? "Hiba t√∂rt√©nt. Pr√≥b√°ld √∫jra k√©s≈ëbb." : "Something went wrong. Please try again.");
      } finally {
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
      }
    });
  </script>
</body>
</html>


